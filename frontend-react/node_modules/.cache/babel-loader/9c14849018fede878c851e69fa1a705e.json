{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\David\\\\Desktop\\\\ReactJS\\\\Stock-Trading-Simulation\\\\Frontend React\\\\src\\\\components\\\\Friends.jsx\",\n    _s = $RefreshSig$();\n\nimport React, { useState } from \"react\";\nimport FriendsTable from \"./FriendsTable\";\nimport Message from \"./Message\";\nimport TradeRequest from \"./TradeRequest\";\nimport SendMessage from \"./SendMessage\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nfunction Friends(props) {\n  _s();\n\n  let [friend, setFriend] = useState(\"\");\n  let [searchedFriend, setSearchedFriend] = useState(\"\");\n  let [isYourFriend, setIsYourFriend] = useState(false);\n  let [message, setMessage] = useState(\"\");\n  let [messageColor, setMessageColor] = useState(\"red\");\n  let [friendRequests, setFriendRequests] = useState(0);\n  let [tradeRequests, setTradeRequests] = useState(0);\n  let [messages, setMessages] = useState(0);\n  let [friends, setFriends] = useState(0);\n  let [formType, setFormType] = useState(0);\n  let [money, setMoney] = useState(0);\n  let [layout, setLayout] = useState(1); //1 for tables, 2 for friend search, 3 for contact\n\n  function find(routeName, override) {\n    if (eval(routeName.charAt(0).toLowerCase() + routeName.substring(1) + \"=== 0\") || override) {\n      fetch(props.link + \"/find\" + routeName.toLowerCase(), {\n        method: 'POST',\n        mode: 'cors',\n        headers: {\n          \"Accept\": \"application/json\",\n          \"Content-Type\": \"application/json\"\n        },\n        body: JSON.stringify({\n          username: props.currentUsername\n        }) //accept is not necessary\n\n      }).then(res => res.json()).then(res => {\n        if (res.result.length > 0) {\n          eval(\"set\" + routeName + \"(res.result)\");\n        } else {\n          eval(\"set\" + routeName + \"(1)\");\n        }\n      });\n    }\n  }\n\n  if (props.currentUsername !== \"\") {\n    //call all the methods!\n    find(\"FriendRequests\");\n    find(\"TradeRequests\");\n    find(\"Messages\");\n    find(\"Friends\");\n\n    if (tradeRequests !== 0 && tradeRequests !== 1) {\n      tradeRequests.map(element => {\n        element.tradeType === \"Buying\" ? element.tradeType = \"Sell\" : element.tradeType = \"Buy\";\n      });\n    }\n  }\n\n  function changeFriendInput(event) {\n    setFriend(event.target.value);\n  }\n\n  function findFriend(event) {\n    event.preventDefault();\n    fetch(props.link + \"/searchfriend\", {\n      method: 'POST',\n      mode: 'cors',\n      headers: {\n        \"Accept\": \"application/json\",\n        \"Content-Type\": \"application/json\"\n      },\n      body: JSON.stringify({\n        username: props.currentUsername,\n        friendUsername: friend\n      }) //accept is not necessary\n\n    }).then(res => res.json()).then(res => {\n      if (res.error === 0) {\n        setMessageColor(\"green\");\n        setSearchedFriend(friend);\n        setLayout(2);\n      } else {\n        setMessageColor(\"red\");\n      }\n\n      setIsYourFriend(res.isYourFriend);\n      setMessage(res.message);\n      setTimeout(() => setMessage(\"\"), 2000);\n    });\n  }\n\n  function sendFriendRequest(name) {\n    fetch(props.link + \"/sendfriendrequest\", {\n      method: 'POST',\n      mode: 'cors',\n      headers: {\n        \"Accept\": \"application/json\",\n        \"Content-Type\": \"application/json\"\n      },\n      body: JSON.stringify({\n        username: props.currentUsername,\n        friendUsername: name\n      }) //accept is not necessary\n\n    }).then(res => res.json()).then(res => {\n      setMessage(res.message);\n      setMessageColor(\"green\");\n      setTimeout(() => {\n        setMessage(\"\");\n        setSearchedFriend(\"\");\n        setLayout(1);\n      }, \"2000\");\n    });\n  }\n\n  function sendTradeRequest(tradeType, stockName, forUnitPrice, volume) {\n    console.log(volume);\n    fetch(props.link + \"/sendtraderequest\", {\n      method: 'POST',\n      mode: 'cors',\n      headers: {\n        \"Accept\": \"application/json\",\n        \"Content-Type\": \"application/json\"\n      },\n      body: JSON.stringify({\n        username: props.currentUsername,\n        friendUsername: searchedFriend,\n        tradeType: tradeType,\n        stockName: stockName,\n        forUnitPrice: forUnitPrice,\n        volume: volume\n      }) //accept is not necessary\n\n    }).then(res => res.json()).then(res => {\n      setMessage(res.message);\n      setMessageColor(\"green\");\n      setFormType(0);\n      setLayout(1);\n      setTimeout(() => {\n        setMessage(\"\");\n      }, \"2000\");\n    });\n  }\n\n  function sendMessage(msg) {\n    fetch(props.link + \"/sendmessage\", {\n      method: 'POST',\n      mode: 'cors',\n      headers: {\n        \"Accept\": \"application/json\",\n        \"Content-Type\": \"application/json\"\n      },\n      body: JSON.stringify({\n        username: props.currentUsername,\n        friendUsername: searchedFriend,\n        message: msg\n      }) //accept is not necessary\n\n    }).then(res => res.json()).then(res => {\n      setMessage(res.message);\n      setMessageColor(\"green\");\n      setFormType(0);\n      setLayout(1);\n      incrementInteractions(props.currentUsername, searchedFriend);\n      setTimeout(() => {\n        setMessage(\"\");\n      }, \"2000\");\n    });\n  }\n\n  function acceptFriendRequest(un) {\n    fetch(props.link + \"/acceptfriendrequest\", {\n      method: 'POST',\n      mode: 'cors',\n      headers: {\n        \"Accept\": \"application/json\",\n        \"Content-Type\": \"application/json\"\n      },\n      body: JSON.stringify({\n        username: props.currentUsername,\n        friendUsername: un\n      }) //accept is not necessary\n\n    }).then(res => res.json()).then(res => {\n      setMessage(res.message);\n      setMessageColor(\"green\");\n      incrementInteractions(props.currentUsername, un);\n      setTimeout(() => {\n        find(\"FriendRequests\", 1);\n        find(\"Friends\", 1);\n        setMessage(\"\");\n      }, \"2000\");\n    });\n  }\n\n  function acceptTradeRequest(username, stockName, unitPrice, quantity, tradeType) {\n    fetch(props.link + \"/accepttraderequest\", {\n      method: 'POST',\n      mode: 'cors',\n      headers: {\n        \"Accept\": \"application/json\",\n        \"Content-Type\": \"application/json\"\n      },\n      body: JSON.stringify({\n        username: props.currentUsername,\n        friendUsername: username,\n        stockName: stockName,\n        unitPrice: unitPrice,\n        quantity: quantity,\n        tradeType: tradeType\n      }) //accept is not necessary\n\n    }).then(res => res.json()).then(res => {\n      setMessage(res.message);\n\n      if (res.message === \"Exchange Failed.\") {\n        setMessageColor(\"red\");\n      } else {\n        setMessageColor(\"green\");\n        incrementInteractions(props.currentUsername, username);\n      }\n\n      setTimeout(() => {\n        find(\"TradeRequests\", 1);\n        setMessage(\"\");\n      }, \"2000\");\n    });\n  }\n\n  function checkMoney() {\n    fetch(props.link + \"/checkmoney\", {\n      method: 'POST',\n      mode: 'cors',\n      headers: {\n        \"Accept\": \"application/json\",\n        \"Content-Type\": \"application/json\"\n      },\n      body: JSON.stringify({\n        username: props.currentUsername\n      }) //accept is not necessary\n\n    }).then(res => res.json()).then(res => {\n      setMoney(res.money);\n    });\n  }\n\n  checkMoney();\n\n  function incrementInteractions(username1, username2) {\n    fetch(props.link + \"/addinteraction\", {\n      method: 'POST',\n      mode: 'cors',\n      headers: {\n        \"Accept\": \"application/json\",\n        \"Content-Type\": \"application/json\"\n      },\n      body: JSON.stringify({\n        username: username1,\n        friendUsername: username2\n      })\n    }).then(res => res.json()).then(res => {\n      console.log(res.result);\n      setTimeout(() => {\n        window.location.reload();\n      }, 1000);\n    });\n  }\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"stocks-search-section bg-dark justify-content-center\",\n      children: /*#__PURE__*/_jsxDEV(\"form\", {\n        className: \"d-flex\",\n        onSubmit: findFriend,\n        children: [props.currentUsername !== \"\" ? /*#__PURE__*/_jsxDEV(\"input\", {\n          onChange: changeFriendInput,\n          className: \"form-control stocks-searchbar me-2\",\n          type: \"search\",\n          placeholder: \"Search for a Friend!\",\n          \"aria-label\": \"Search\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 197,\n          columnNumber: 9\n        }, this) : /*#__PURE__*/_jsxDEV(\"input\", {\n          onChange: changeFriendInput,\n          className: \"form-control stocks-searchbar me-2\",\n          type: \"search\",\n          placeholder: \"Login to Find Friends!\",\n          \"aria-label\": \"Search\",\n          readOnly: true\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 198,\n          columnNumber: 9\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"btn btn-success\",\n          type: \"submit\",\n          children: \"Search\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 199,\n          columnNumber: 9\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 195,\n        columnNumber: 7\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 194,\n      columnNumber: 5\n    }, this), /*#__PURE__*/_jsxDEV(Message, {\n      message: message,\n      color: messageColor\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 204,\n      columnNumber: 5\n    }, this), props.currentUsername !== \"\" ? /*#__PURE__*/_jsxDEV(\"div\", {\n      class: \"background-filler\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"wrapper\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          children: layout === 1 ? /*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n              style: {\n                color: \"green\"\n              },\n              children: [\"Money: $\", Math.round(money * 100) / 100]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 211,\n              columnNumber: 5\n            }, this), friendRequests !== 0 && friendRequests !== 1 ?\n            /*#__PURE__*/\n            //0 is for not loaded yet, is for no results returned\n            _jsxDEV(FriendsTable, {\n              name: \"Friend Requests\",\n              data: friendRequests,\n              headers: [\"Username\", \"Name\", \"Date Sent\", \"Accept\"],\n              buttonName: \"Accept\" //check to see if custom button names work\n              ,\n              cols: [\"usernameSender\", \"nameSender\", \"dateSent\"],\n              func: acceptFriendRequest\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 213,\n              columnNumber: 5\n            }, this) : /*#__PURE__*/_jsxDEV(Message, {\n              message: \"No Friend Requests\",\n              color: \"black\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 215,\n              columnNumber: 10\n            }, this), tradeRequests !== 0 && tradeRequests !== 1 ? /*#__PURE__*/_jsxDEV(FriendsTable, {\n              name: \"Trade Requests\",\n              data: tradeRequests,\n              headers: [\"Username\", \"Asks You To...\", \"Stock Name\", \"Unit Price\", \"Quantity\", \"Total Price\", \"Accept\"],\n              buttonName: \"Accept\",\n              cols: [\"usernameSender\", \"tradeType\", \"stockName\", \"forUnitPrice\", \"volume\", \"total\"],\n              func: acceptTradeRequest\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 217,\n              columnNumber: 5\n            }, this) : /*#__PURE__*/_jsxDEV(Message, {\n              message: \"No Trade Requests\",\n              color: \"black\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 219,\n              columnNumber: 10\n            }, this), messages !== 0 && messages !== 1 ? /*#__PURE__*/_jsxDEV(FriendsTable, {\n              name: \"Messages\",\n              data: messages,\n              headers: [\"Username\", \"Message\", \"Respond\"],\n              buttonName: \"Respond\",\n              cols: [\"usernameSender\", \"message\"],\n              func: thisUsername => {\n                setSearchedFriend(thisUsername);\n                setFormType(2);\n                setLayout(3);\n              } //may need to be fixed\n\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 221,\n              columnNumber: 5\n            }, this) : /*#__PURE__*/_jsxDEV(Message, {\n              message: \"No Messages\",\n              color: \"black\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 223,\n              columnNumber: 10\n            }, this), friends !== 0 && friends !== 1 ? /*#__PURE__*/_jsxDEV(FriendsTable, {\n              name: \"Friends\",\n              data: friends,\n              headers: [\"Username\", \"Name\", \"Friends Since\", \"Interactions\", \"Contact\"],\n              buttonName: \"Contact\",\n              cols: [\"friendUsername\", \"friendName\", \"dateStart\", \"interactions\"],\n              func: thisUsername => {\n                setSearchedFriend(thisUsername);\n                setFormType(1);\n                setLayout(3);\n              } //this one too\n\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 225,\n              columnNumber: 5\n            }, this) : /*#__PURE__*/_jsxDEV(Message, {\n              message: \"No Friends\",\n              color: \"black\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 227,\n              columnNumber: 10\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 210,\n            columnNumber: 5\n          }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n            children: layout === 2 ?\n            /*#__PURE__*/\n            //next, layout is 2, for finding someone\n            _jsxDEV(\"div\", {\n              children: searchedFriend !== \"\" && messageColor === \"green\" ? /*#__PURE__*/_jsxDEV(\"div\", {\n                children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                  onClick: isYourFriend ? () => {\n                    setFormType(1);\n                    setLayout(3);\n                  } : () => sendFriendRequest(searchedFriend),\n                  className: \"friends-custom-button\",\n                  style: {\n                    backgroundColor: \"#007806\"\n                  },\n                  type: \"submit\",\n                  children: isYourFriend ? \"Contact \" + searchedFriend : \"Send Friend Request\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 234,\n                  columnNumber: 9\n                }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                  className: \"friends-custom-button\",\n                  onClick: () => {\n                    setLayout(1);\n                    setSearchedFriend(\"\");\n                  },\n                  children: \"Return To Main\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 235,\n                  columnNumber: 9\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 233,\n                columnNumber: 54\n              }, this) : /*#__PURE__*/_jsxDEV(\"div\", {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 237,\n                columnNumber: 13\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 232,\n              columnNumber: 5\n            }, this) :\n            /*#__PURE__*/\n            //next, layout must be 3, for contacting\n            _jsxDEV(\"div\", {\n              children: [formType !== 0 ? /*#__PURE__*/_jsxDEV(\"div\", {\n                children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n                  children: [\"Contacting: \", searchedFriend, \" \"]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 244,\n                  columnNumber: 5\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"contact-flex-container\",\n                  children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                    clasName: \"contact-flex-div\",\n                    children: /*#__PURE__*/_jsxDEV(\"button\", {\n                      style: {\n                        backgroundColor: \"green\",\n                        border: formType === 1 ? \"3px solid #222222\" : \"none\"\n                      },\n                      onClick: () => {\n                        setLayout(3);\n                        setFormType(1);\n                      },\n                      type: \"submit\",\n                      className: \"friends-custom-button\",\n                      children: \"Trade Request\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 247,\n                      columnNumber: 13\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 246,\n                    columnNumber: 9\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    clasName: \"contact-flex-div\",\n                    children: /*#__PURE__*/_jsxDEV(\"button\", {\n                      style: {\n                        backgroundColor: \"green\",\n                        border: formType === 2 ? \"3px solid #222222\" : \"none\"\n                      },\n                      onClick: () => {\n                        setLayout(3);\n                        setFormType(2);\n                      },\n                      type: \"submit\",\n                      className: \"friends-custom-button\",\n                      children: \"Send Message\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 250,\n                      columnNumber: 13\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 249,\n                    columnNumber: 9\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    clasName: \"contact-flex-div\",\n                    children: /*#__PURE__*/_jsxDEV(\"button\", {\n                      className: \"friends-custom-button\",\n                      onClick: () => {\n                        setLayout(1);\n                        setSearchedFriend(\"\");\n                      },\n                      children: \"Return To Main\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 253,\n                      columnNumber: 9\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 252,\n                    columnNumber: 9\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 245,\n                  columnNumber: 5\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 242,\n                columnNumber: 5\n              }, this) : /*#__PURE__*/_jsxDEV(\"div\", {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 256,\n                columnNumber: 12\n              }, this), formType === 1 ? /*#__PURE__*/_jsxDEV(TradeRequest, {\n                func: sendTradeRequest\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 257,\n                columnNumber: 21\n              }, this) : /*#__PURE__*/_jsxDEV(\"div\", {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 257,\n                columnNumber: 62\n              }, this), formType === 2 ? /*#__PURE__*/_jsxDEV(SendMessage, {\n                func: sendMessage,\n                username: searchedFriend\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 258,\n                columnNumber: 21\n              }, this) : /*#__PURE__*/_jsxDEV(\"div\", {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 258,\n                columnNumber: 82\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 240,\n              columnNumber: 5\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 230,\n            columnNumber: 5\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 208,\n          columnNumber: 5\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 207,\n        columnNumber: 5\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 206,\n      columnNumber: 5\n    }, this) : /*#__PURE__*/_jsxDEV(Message, {\n      message: \"Login to see Friends\",\n      color: \"black\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 268,\n      columnNumber: 5\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 193,\n    columnNumber: 9\n  }, this);\n}\n\n_s(Friends, \"7MYTWNVZ+Uaihmne45GyBwpC9ck=\");\n\n_c = Friends;\nexport default Friends;\n\nvar _c;\n\n$RefreshReg$(_c, \"Friends\");","map":{"version":3,"sources":["C:/Users/David/Desktop/ReactJS/Stock-Trading-Simulation/Frontend React/src/components/Friends.jsx"],"names":["React","useState","FriendsTable","Message","TradeRequest","SendMessage","Friends","props","friend","setFriend","searchedFriend","setSearchedFriend","isYourFriend","setIsYourFriend","message","setMessage","messageColor","setMessageColor","friendRequests","setFriendRequests","tradeRequests","setTradeRequests","messages","setMessages","friends","setFriends","formType","setFormType","money","setMoney","layout","setLayout","find","routeName","override","eval","charAt","toLowerCase","substring","fetch","link","method","mode","headers","body","JSON","stringify","username","currentUsername","then","res","json","result","length","map","element","tradeType","changeFriendInput","event","target","value","findFriend","preventDefault","friendUsername","error","setTimeout","sendFriendRequest","name","sendTradeRequest","stockName","forUnitPrice","volume","console","log","sendMessage","msg","incrementInteractions","acceptFriendRequest","un","acceptTradeRequest","unitPrice","quantity","checkMoney","username1","username2","window","location","reload","color","Math","round","thisUsername","backgroundColor","border"],"mappings":"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","sourcesContent":["import React, {useState} from \"react\";\nimport FriendsTable from \"./FriendsTable\";\nimport Message from \"./Message\";\nimport TradeRequest from \"./TradeRequest\";\nimport SendMessage from \"./SendMessage\";\n\nfunction Friends(props){\n\nlet [friend, setFriend] = useState(\"\");\nlet [searchedFriend, setSearchedFriend] = useState(\"\");\nlet [isYourFriend, setIsYourFriend] = useState(false);\nlet [message, setMessage] = useState(\"\");\nlet [messageColor, setMessageColor] = useState(\"red\");\n\nlet [friendRequests, setFriendRequests] = useState(0);\nlet [tradeRequests, setTradeRequests] = useState(0);\nlet [messages, setMessages] = useState(0);\nlet [friends, setFriends] = useState(0);\n\nlet [formType, setFormType] = useState(0);\nlet [money, setMoney] = useState(0);\n\nlet [layout, setLayout] = useState(1); //1 for tables, 2 for friend search, 3 for contact\n\nfunction find(routeName, override){\nif(eval(routeName.charAt(0).toLowerCase() + routeName.substring(1) + \"=== 0\") || override){\nfetch(props.link + \"/find\" + routeName.toLowerCase() , {\n    method: 'POST',\n    mode: 'cors',\n    headers: {\"Accept\": \"application/json\", \"Content-Type\": \"application/json\"},\n    body: JSON.stringify({username: props.currentUsername}) //accept is not necessary\n}).then(res => res.json())\n.then( res => {\n    if(res.result.length>0){\n        eval(\"set\" + routeName + \"(res.result)\");\n    }\n    else{\n        eval(\"set\" + routeName + \"(1)\");        \n    }\n});\n}\n}\nif(props.currentUsername!==\"\"){ //call all the methods!\n    find(\"FriendRequests\");find(\"TradeRequests\");find(\"Messages\");find(\"Friends\");\n    if(tradeRequests!==0 && tradeRequests!==1){\n        tradeRequests.map((element) => {\n            element.tradeType===\"Buying\"? element.tradeType=\"Sell\":element.tradeType=\"Buy\";\n        });\n    }\n}\n\nfunction changeFriendInput(event){\n    setFriend(event.target.value);\n}\nfunction findFriend(event){\n    event.preventDefault();\n    fetch(props.link + \"/searchfriend\", {\n        method: 'POST',\n        mode: 'cors',\n        headers: {\"Accept\": \"application/json\", \"Content-Type\": \"application/json\"},\n        body: JSON.stringify({username: props.currentUsername, friendUsername: friend}) //accept is not necessary\n    }).then((res) => res.json())\n    .then(res => {\n        if(res.error===0){\n            setMessageColor(\"green\");\n            setSearchedFriend(friend);\n            setLayout(2);\n        }\n        else{\n            setMessageColor(\"red\");\n        }\n        setIsYourFriend(res.isYourFriend);\n        setMessage(res.message);\n        setTimeout( () => setMessage(\"\"), 2000);\n    })\n}\nfunction sendFriendRequest(name){\n    fetch(props.link + \"/sendfriendrequest\", {\n        method: 'POST',\n        mode: 'cors',\n        headers: {\"Accept\": \"application/json\", \"Content-Type\": \"application/json\"},\n        body: JSON.stringify({username: props.currentUsername, friendUsername: name}) //accept is not necessary\n    }).then((res) => res.json())\n    .then((res) => {\n        setMessage(res.message);\n        setMessageColor(\"green\");\n        setTimeout( () => {\n            setMessage(\"\");\n            setSearchedFriend(\"\");\n            setLayout(1);\n        }, \"2000\");\n    });\n}\nfunction sendTradeRequest(tradeType, stockName, forUnitPrice, volume){\n    console.log(volume);\n    fetch(props.link + \"/sendtraderequest\", {\n        method: 'POST',\n        mode: 'cors',\n        headers: {\"Accept\": \"application/json\", \"Content-Type\": \"application/json\"},\n        body: JSON.stringify({username: props.currentUsername, friendUsername: searchedFriend, tradeType: tradeType, stockName: stockName, forUnitPrice: forUnitPrice, volume: volume}) //accept is not necessary\n    }).then((res) => res.json())\n    .then((res) => {\n        setMessage(res.message);\n        setMessageColor(\"green\");\n        setFormType(0);\n        setLayout(1);\n        setTimeout(() => {setMessage(\"\");}, \"2000\");\n    });\n}\nfunction sendMessage(msg){\n    fetch(props.link + \"/sendmessage\", {\n        method: 'POST',\n        mode: 'cors',\n        headers: {\"Accept\": \"application/json\", \"Content-Type\": \"application/json\"},\n        body: JSON.stringify({username: props.currentUsername, friendUsername: searchedFriend, message: msg}) //accept is not necessary\n    }).then((res) => res.json())\n    .then((res) => {\n        setMessage(res.message);\n        setMessageColor(\"green\");\n        setFormType(0);\n        setLayout(1);\n        incrementInteractions(props.currentUsername, searchedFriend);\n        setTimeout(() => {setMessage(\"\")}, \"2000\");\n    });\n}\nfunction acceptFriendRequest(un){\n    fetch(props.link + \"/acceptfriendrequest\", {\n        method: 'POST',\n        mode: 'cors',\n        headers: {\"Accept\": \"application/json\", \"Content-Type\": \"application/json\"},\n        body: JSON.stringify({username: props.currentUsername, friendUsername: un}) //accept is not necessary\n    }).then((res) => res.json())\n    .then((res) => {\n        setMessage(res.message);\n        setMessageColor(\"green\");\n        incrementInteractions(props.currentUsername, un);\n        setTimeout(()=>{\n        find(\"FriendRequests\", 1);find(\"Friends\", 1); setMessage(\"\");\n        }, \"2000\")\n    });\n}\nfunction acceptTradeRequest(username, stockName, unitPrice, quantity, tradeType){\n    fetch(props.link + \"/accepttraderequest\", {\n        method: 'POST',\n        mode: 'cors',\n        headers: {\"Accept\": \"application/json\", \"Content-Type\": \"application/json\"},\n        body: JSON.stringify({username: props.currentUsername, friendUsername: username, stockName: stockName, unitPrice: unitPrice, quantity: quantity, tradeType: tradeType}) //accept is not necessary\n    }).then((res) => res.json())\n    .then((res) => {\n        setMessage(res.message);\n        if(res.message===\"Exchange Failed.\"){\n            setMessageColor(\"red\");\n        }\n        else {\n            setMessageColor(\"green\");\n            incrementInteractions(props.currentUsername, username);\n        }\n        setTimeout(()=>{\n        find(\"TradeRequests\", 1); setMessage(\"\");\n        }, \"2000\")\n    });\n}\n\nfunction checkMoney(){\n    fetch(props.link + \"/checkmoney\", {\n        method: 'POST',\n        mode: 'cors',\n        headers: {\"Accept\": \"application/json\", \"Content-Type\": \"application/json\"},\n        body: JSON.stringify({username: props.currentUsername}) //accept is not necessary\n    }).then((res) => res.json())\n    .then((res) => {\n        setMoney(res.money);\n    });\n}\ncheckMoney();\nfunction incrementInteractions(username1, username2) {\n    fetch(props.link + \"/addinteraction\", {\n        method: 'POST',\n        mode: 'cors',\n        headers: {\"Accept\": \"application/json\", \"Content-Type\": \"application/json\"},\n        body: JSON.stringify({username: username1, friendUsername: username2})\n    }).then((res) => res.json())\n    .then(res => {\n        console.log(res.result);\n        setTimeout( () => {\n            window.location.reload();\n        }, 1000);\n    })\n}\n\n\n\nreturn (<div>\n    <div className=\"stocks-search-section bg-dark justify-content-center\">\n      <form className=\"d-flex\" onSubmit={findFriend}>\n      {props.currentUsername!==\"\"?\n        <input onChange={changeFriendInput} className=\"form-control stocks-searchbar me-2\" type=\"search\" placeholder=\"Search for a Friend!\" aria-label=\"Search\" />:\n        <input onChange={changeFriendInput} className=\"form-control stocks-searchbar me-2\" type=\"search\" placeholder=\"Login to Find Friends!\" aria-label=\"Search\" readOnly />}\n        <button className=\"btn btn-success\" type=\"submit\">Search</button>\n      </form>\n    </div>\n\n\n    <Message message={message} color={messageColor} />\n    {props.currentUsername!==\"\" ? \n    <div class=\"background-filler\">\n    <div className=\"wrapper\">\n    <div>\n    {layout === 1 ?\n    <div>\n    <h1 style={{color: \"green\"}}>Money: ${Math.round(money*100)/100}</h1>\n    {friendRequests!==0 && friendRequests!==1 ? //0 is for not loaded yet, is for no results returned\n    <FriendsTable name=\"Friend Requests\" data={friendRequests} headers={[\"Username\", \"Name\", \"Date Sent\", \"Accept\"]} buttonName=\"Accept\"  //check to see if custom button names work\n        cols={[\"usernameSender\", \"nameSender\", \"dateSent\"]} func={acceptFriendRequest}\n    /> : <Message message=\"No Friend Requests\" color=\"black\" /> }\n    {tradeRequests!==0 && tradeRequests!==1 ? \n    <FriendsTable name=\"Trade Requests\" data={tradeRequests} headers={[\"Username\", \"Asks You To...\", \"Stock Name\", \"Unit Price\", \"Quantity\", \"Total Price\", \"Accept\"]}  buttonName=\"Accept\"\n        cols={[\"usernameSender\", \"tradeType\", \"stockName\", \"forUnitPrice\", \"volume\", \"total\"]} func={acceptTradeRequest}\n    /> : <Message message=\"No Trade Requests\" color=\"black\" /> }\n    {messages!==0 && messages!==1 ? \n    <FriendsTable name=\"Messages\" data={messages} headers={[\"Username\", \"Message\", \"Respond\"]} buttonName=\"Respond\"\n        cols={[\"usernameSender\", \"message\"]} func={(thisUsername) => { setSearchedFriend(thisUsername); setFormType(2); setLayout(3);}}  //may need to be fixed\n    /> : <Message message=\"No Messages\" color=\"black\" /> }\n    {friends!==0 && friends!==1 ? \n    <FriendsTable name=\"Friends\" data={friends} headers={[\"Username\", \"Name\", \"Friends Since\", \"Interactions\", \"Contact\"]} buttonName = \"Contact\"\n        cols={[\"friendUsername\", \"friendName\", \"dateStart\", \"interactions\"]} func={(thisUsername)=>{setSearchedFriend(thisUsername); setFormType(1); setLayout(3); } } //this one too\n    /> : <Message message=\"No Friends\" color=\"black\" /> }\n    </div>\n    : \n    <div>\n    {layout === 2 ? //next, layout is 2, for finding someone\n    <div>\n    {searchedFriend!==\"\" && messageColor===\"green\" ? <div>\n        <button onClick={isYourFriend ? () => {setFormType(1); setLayout(3)}: () => sendFriendRequest(searchedFriend)} className=\"friends-custom-button\" style={{backgroundColor: \"#007806\"}} type=\"submit\">{isYourFriend ? \"Contact \" + searchedFriend: \"Send Friend Request\"}</button>\n        <button className=\"friends-custom-button\" onClick={() => { setLayout(1); setSearchedFriend(\"\"); }}>Return To Main</button>\n\n    </div>: <div></div>}\n    </div>\n    : //next, layout must be 3, for contacting\n    <div>\n    {formType!==0 ? \n    <div>\n\n    <h1>Contacting: {searchedFriend} </h1>\n    <div className=\"contact-flex-container\">\n        <div clasName=\"contact-flex-div\">\n            <button style={{backgroundColor: \"green\", border: formType===1 ? \"3px solid #222222\":\"none\"}} onClick={ () => {setLayout(3); setFormType(1); }} type=\"submit\" className=\"friends-custom-button\">Trade Request</button>\n        </div>\n        <div clasName=\"contact-flex-div\">\n            <button style={{backgroundColor: \"green\", border: formType===2 ? \"3px solid #222222\":\"none\"}} onClick={ () => {setLayout(3); setFormType(2); }} type=\"submit\" className=\"friends-custom-button\">Send Message</button>\n        </div>\n        <div clasName=\"contact-flex-div\">\n        <button className=\"friends-custom-button\" onClick={() => { setLayout(1); setSearchedFriend(\"\"); }}>Return To Main</button>\n        </div>\n    </div>\n    </div>:<div></div> } \n    {formType===1 ? <TradeRequest func={sendTradeRequest} />:<div></div>}\n    {formType===2 ? <SendMessage func={sendMessage} username={searchedFriend} />:<div></div>}\n    </div>\n    }\n    </div>\n    \n    }\n    </div>\n    </div>\n    </div>\n    :\n    <Message message=\"Login to see Friends\" color=\"black\" />\n    }\n</div>);\n}\nexport default Friends;"]},"metadata":{},"sourceType":"module"}